{
  "hash": "f68e3ec4b9e4d5d7c8a8196e3e1e3901",
  "result": {
    "markdown": "# Data Preparation\n\n\n::: {.cell hash='01_datapreparation_cache/html/01-page-setup_b648741d2155f047b83787479310b9f5'}\n\n```{.r .cell-code}\nsource(\"prerender.R\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.3     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.3     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.0\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\nThis is psychonetrics 0.11! Note: this is BETA software! Please mind that the package may not be stable and report any bugs! For more information, please see psychonetrics.org, for questions and issues, please see github.com/SachaEpskamp/psychonetrics.\n\n\nAttaching package: 'psychonetrics'\n\n\nThe following object is masked from 'package:graphics':\n\n    identify\n\n\nThis is bootnet 1.5.5\n\nFor questions and issues, please see github.com/SachaEpskamp/bootnet.\n```\n:::\n:::\n\n\n## Exporting from SPSS and naming conventions\n\nThe data were collected by a third party and given to the researchers as an SPSS data file. We selected the necessary variables from the full data set and exported them in `.csv` format for analysis in R.\n\n@tbl-spss-exported-variables shows the collected variables with original questions and short-hand names.\n\n| Exported name      | Survey question                                                                                                          | Short-hand name |\n|----------------|----------------------------------------|----------------|\n| question_3_row_1   | Extreme weather phenomena (flood, drought, storm etc.)                                                                   | Weather         |\n| question_3_row_2   | Traffic accident                                                                                                         | Traffic         |\n| question_3_row_3   | Fire                                                                                                                     | Fire            |\n| question_3_row_4   | Nuclear power plant disaster                                                                                             | Nuclear         |\n| question_3_row_5   | Workplace accident                                                                                                       | Work            |\n| question_3_row_6   | Leisure-time accident (at home/at hobbies etc.)                                                                          | Leisure         |\n| question_3_row_7   | Attack with weapons directed at the Finnish state                                                                        | War             |\n| question_3_row_8   | Great environmental accident, such as an oil catastrophe                                                                 | Environmental   |\n| question_3_row_9   | Dangerous transmittable disease, pandemic                                                                                | Pandemic        |\n| question_3_row_10  | Illness, severely falling ill (e.g., life-threatening cancer)                                                            | Illness         |\n| question_3_row_11  | Act of violence                                                                                                          | Violence        |\n| question_3_row_12  | Operational failure directed at e.g., electrical, water, or food supply, information traffic or the informational system | Operational     |\n| question_3_row_13  | Influencing through information, fake news, other so-called hybrid threats                                               | Hybrid          |\n| question_3_row_14  | Growth of tensions between social groups, polarization                                                                   | Polarization    |\n| question_25_row_1  | Yes, regarding a fire                                                                                                    | Fire_Exp        |\n| question_25_row_2  | Yes, regarding a traffic accident                                                                                        | Traffic_Exp     |\n| question_25_row_3  | Yes, regarding another accident                                                                                          | Accident_Exp    |\n| question_25_row_4  | Yes, regarding another rescue event                                                                                      | Rescue_Exp      |\n| question_25_row_5  | Yes, leisure-time accident                                                                                               | Leisure_Exp     |\n| question_25_row_6  | Yes, workplace accident                                                                                                  | Work_Exp        |\n| question_25_row_7  | Yes, illness                                                                                                             | Illness_Exp     |\n| question_25_row_8  | Yes, an inspection visit                                                                                                 | Inspection_Exp  |\n| question_25_row_9  | Yes, safety education                                                                                                    | Education_Exp   |\n| question_25_row_10 | Yes, public event, visit etc. (A Day at the Fire Station, a fair, 112 Day, local events)                                 | Event_Exp       |\n| question_25_row_11 | Yes, in social media or otherwise on-line                                                                                | Internet_Exp    |\n| question_25_row_12 | Yes, something else                                                                                                      | Other_Exp       |\n| question_25_row_13 | I have not been engaged with emergency services personnel                                                                | No_Experience   |\n| question_25_row_14 | I cannot say                                                                                                             | CannotSay_Exp   |\n\n: Variables exported from SPSS {#tbl-spss-exported-variables}\n\nThe first fourteen variables (`question_3_row_1` to `question_3_row_14`) are the risk perception variables, all collected as a question battery with the following translated main question: *How likely do You think you are to encounter the following threats or dangers in Your personal life?*[^01_datapreparation-1]\n\n[^01_datapreparation-1]: Original in Finnish: *Kuinka todennäköisenä pidätte seuraavien uhkien tai vaarojen kohtaamista henkilökohtaisessa elämässänne?*\n\nThe following fourteen variables (`question_25_row_1` to `question_25_row_14`) are measurements of risk experiences, all collected as a question battery with the following translated main question: *Have You, in the past 12 months, been engaged with emergency services personnel?*[^01_datapreparation-2]\n\n[^01_datapreparation-2]: Original in Finnish: *Oletteko ollut viimeisen 12 kk aikana tekemisissä pelastushenkilöstön kanssa?*\n\nAll variables listed in @tbl-spss-exported-variables were exported into a `.csv` file using the SPSS function `File > Export > CSV Data...` using default settings and selecting only those variables listed. The file was saved as `emergencyservicesattitudes2023.csv` and was used in subsequent analyses in R.\n\n## Setting up R Environment\n\nWe initialised the R environment with the following packages:\n\n\n::: {.cell hash='01_datapreparation_cache/html/setup_e2ff8a298b2a063ed006d14e9a29c6a3'}\n\n```{.r .cell-code}\n# Clear environment first\nrm(list=ls())\nresetpar <- par(no.readonly = TRUE)\n\n# Setup directories and libraries\npackages <- c(\n  \"tidyverse\", \"naniar\", \"psychonetrics\"\n)\nlapply(packages, library, character.only = TRUE)\n```\n:::\n\n\n## Import into R and Recoding\n\nThe data were then imported into R and saved as a variable.\n\n\n::: {.cell hash='01_datapreparation_cache/html/setup-2_c3a1cef372f205b053734a8e43b06595'}\n\n```{.r .cell-code}\ndata <- tibble(read.csv2(\"emergencyservicesattitudes2023.csv\"))\n```\n:::\n\n\nWe changed the original coding of the fourteen risk variables to match a logical structure according to @tbl-risk-variables-recode below.\n\n| Original code | Label             | New code  |\n|---------------|-------------------|-----------|\n| 1             | Likely            | 4         |\n| 2             | Somewhat likely   | 3         |\n| 3             | Somewhat unlikely | 2         |\n| 4             | Unlikely          | 1         |\n| 5             | I cannot say      | *missing* |\n\n: Recoding of risk perception variables {#tbl-risk-variables-recode}\n\n\n::: {.cell hash='01_datapreparation_cache/html/setup-3_4d68f810eb6ab038bb7af05f5f7f68c6'}\n\n```{.r .cell-code}\ndata <- data %>%\n  dplyr::rename(\n    Weather = question_3_row_1,\n    Traffic = question_3_row_2,\n    Fire = question_3_row_3,\n    Nuclear = question_3_row_4,\n    Work = question_3_row_5,\n    Leisure = question_3_row_6,\n    War = question_3_row_7,\n    Environmental = question_3_row_8,\n    Pandemic = question_3_row_9,\n    Illness = question_3_row_10,\n    Violence = question_3_row_11,\n    Operational = question_3_row_12,\n    Hybrid = question_3_row_13,\n    Polarization = question_3_row_14,\n    Fire_Exp = question_25_row_1,\n    Traffic_Exp = question_25_row_2,\n    Accident_Exp = question_25_row_3,\n    Rescue_Exp = question_25_row_4,\n    Leisure_Exp = question_25_row_5,\n    Work_Exp = question_25_row_6,\n    Illness_Exp = question_25_row_7,\n    Inspection_Exp = question_25_row_8,\n    Education_Exp = question_25_row_9,\n    Event_Exp = question_25_row_10,\n    Internet_Exp = question_25_row_11,\n    Other_Exp = question_25_row_12,\n    No_Experience = question_25_row_13,\n    CannotSay_Exp = question_25_row_14\n  )\n\ndata <- data %>%\n  dplyr::mutate(\n    across(\n      Weather:Polarization,\n      ~case_match(\n        .,\n        1 ~ 4,\n        2 ~ 3,\n        3 ~ 2,\n        4 ~ 1\n      )\n    )\n  )\n\ndata <- data %>%\n  naniar::replace_with_na_all(., condition = ~.x == 5)\n```\n:::\n\n\nWe did not change the risk experience variables' coding scheme, as it was already suitable for analysis. Risk experiences were coded either as `0` (not selected, i.e., \"no\") or `1` (selected, i.e., \"yes\").\n\nRisk experiences were originally piped in the survey in the following way:\n\n-   The question was a multiple-choice question, with no restrictions on how many choices the respondent made (except for the ones below).\n-   If a respondent chose any of the twelve first experiences (question_25_row_1 to question_25_row_12), the final two choices were greyed out and unavailable.\n-   If a respondent chose \"I have not been engaged with emergency services personnel\", all other choices became unavailable.\n-   If a respondent chose \"I cannot say\", all other choices became unavailable.\n-   Thus, the maximum choices were twelve unique emergency services personnel contact experiences.\n-   Choosing \"No\" or \"Cannot say\" was exclusive to all other responses.\n\nThe dataset measured self-reported contact experiences in multiple scenarios, seven of which were hazard-related: a fire, a traffic accident, a generic accident, a rescue-related event, a leisure-time accident, a work accident or an illness. Each variable was measured as a dichotomy, with `1` indicating an experience and `0` indicating a lack of experience. We first constructed a sum variable measuring *overall hazard experience*. However, a tabulation of the responses showed very low occurrence rates of more than one experience, so we opted to dichotomise the variable into having had no experiences or having had at least one experience. The cross-tabulation in @tbl-hazard-experience-crosstab shows the results of the dichotomisation, in counts.\n\n\n::: {.cell hash='01_datapreparation_cache/html/setup-4_4c82e3b313c92a6b54c1dbe7612a4db2'}\n\n```{.r .cell-code}\n# Constructing the experience group\nexp.variables <- c(\"Fire_Exp\", \"Traffic_Exp\", \"Accident_Exp\", \"Rescue_Exp\", \"Leisure_Exp\", \"Work_Exp\", \"Illness_Exp\")\nexperience <- rowSums(data[, exp.variables]) %>%\n  tibble() %>%\n  dplyr::mutate(across(everything(), function(x) ifelse(x >= 1, 1, 0))) %>%\n  rename(., Experience.Dichotomy = \".\")\n\n# Bind experience to main dataset\ndata <- dplyr::bind_cols(data, experience)\n```\n:::\n\n::: {#tbl-hazard-experience-crosstab .cell hash='01_datapreparation_cache/html/tbl-hazard-experience-crosstab_43c93d46a93775f9b02e775c7e378c5a'}\n\n```{.r .cell-code}\ncrosstab.comp <- data.frame(matrix(nrow = 3055, ncol = 2))\nexp.quantitative <- rowSums(data[, exp.variables]) %>% tibble()\ncrosstab.comp$X1 <- exp.quantitative$.\ncrosstab.comp$X2 <- experience$Experience.Dichotomy\nftable(table(crosstab.comp$X1, crosstab.comp$X2, dnn = c(\"Quantitative\", \"Dichotomous\")))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n             Dichotomous    0    1\nQuantitative                      \n0                        2319    0\n1                           0  567\n2                           0  110\n3                           0   42\n4                           0    7\n5                           0    4\n6                           0    1\n7                           0    5\n```\n:::\n:::\n\n\nThe dichotomous groups have the following counts: 736 respondents have had at least one hazard experience, and 2319 respondents have not had a single hazard experience during the past 12 months.\n\n## Checking Correctness of Data\n\nWe then proceeded to check that all data had been correctly entered and modified. The results are in @tbl-data-summary (the table is very wide!).\n\n\n::: {#tbl-data-summary .cell .column-screen tbl-cap='Summary of all variables after recoding' hash='01_datapreparation_cache/html/tbl-data-summary_1b76cf2225c804151251c0f78f29ff5b'}\n\n```{.r .cell-code}\nknitr::kable(summary(data, digits = 2))\n```\n\n::: {.cell-output-display}\n|   |   Weather  |   Traffic  |     Fire   |   Nuclear  |     Work   |   Leisure  |     War    |Environmental |   Pandemic |   Illness  |   Violence | Operational |    Hybrid  | Polarization |   Fire_Exp   | Traffic_Exp  | Accident_Exp |  Rescue_Exp  | Leisure_Exp  |   Work_Exp  | Illness_Exp |Inspection_Exp |Education_Exp |  Event_Exp   | Internet_Exp |  Other_Exp   |No_Experience |CannotSay_Exp |Experience.Dichotomy |\n|:--|:-----------|:-----------|:-----------|:-----------|:-----------|:-----------|:-----------|:-------------|:-----------|:-----------|:-----------|:------------|:-----------|:-------------|:-------------|:-------------|:-------------|:-------------|:-------------|:------------|:------------|:--------------|:-------------|:-------------|:-------------|:-------------|:-------------|:-------------|:--------------------|\n|   |Min.   :1.0 |Min.   :1.0 |Min.   :1.0 |Min.   :1.0 |Min.   :1   |Min.   :1.0 |Min.   :1.0 |Min.   :1.0   |Min.   :1.0 |Min.   :1.0 |Min.   :1.0 |Min.   :1.0  |Min.   :1.0 |Min.   :1.0   |Min.   :0.000 |Min.   :0.000 |Min.   :0.000 |Min.   :0.000 |Min.   :0.000 |Min.   :0.00 |Min.   :0.00 |Min.   :0.000  |Min.   :0.000 |Min.   :0.000 |Min.   :0.000 |Min.   :0.000 |Min.   :0.00  |Min.   :0.000 |Min.   :0.00         |\n|   |1st Qu.:1.0 |1st Qu.:2.0 |1st Qu.:2.0 |1st Qu.:1.0 |1st Qu.:1   |1st Qu.:2.0 |1st Qu.:1.0 |1st Qu.:2.0   |1st Qu.:2.0 |1st Qu.:2.0 |1st Qu.:2.0 |1st Qu.:2.0  |1st Qu.:2.0 |1st Qu.:2.0   |1st Qu.:0.000 |1st Qu.:0.000 |1st Qu.:0.000 |1st Qu.:0.000 |1st Qu.:0.000 |1st Qu.:0.00 |1st Qu.:0.00 |1st Qu.:0.000  |1st Qu.:0.000 |1st Qu.:0.000 |1st Qu.:0.000 |1st Qu.:0.000 |1st Qu.:0.00  |1st Qu.:0.000 |1st Qu.:0.00         |\n|   |Median :2.0 |Median :3.0 |Median :2.0 |Median :2.0 |Median :2   |Median :3.0 |Median :2.0 |Median :2.0   |Median :3.0 |Median :3.0 |Median :2.0 |Median :3.0  |Median :3.0 |Median :3.0   |Median :0.000 |Median :0.000 |Median :0.000 |Median :0.000 |Median :0.000 |Median :0.00 |Median :0.00 |Median :0.000  |Median :0.000 |Median :0.000 |Median :0.000 |Median :0.000 |Median :1.00  |Median :0.000 |Median :0.00         |\n|   |Mean   :2.3 |Mean   :2.7 |Mean   :2.4 |Mean   :1.7 |Mean   :2   |Mean   :2.8 |Mean   :2.1 |Mean   :2.2   |Mean   :2.9 |Mean   :2.8 |Mean   :2.2 |Mean   :2.8  |Mean   :2.9 |Mean   :2.7   |Mean   :0.035 |Mean   :0.034 |Mean   :0.033 |Mean   :0.034 |Mean   :0.054 |Mean   :0.03 |Mean   :0.11 |Mean   :0.038  |Mean   :0.047 |Mean   :0.046 |Mean   :0.029 |Mean   :0.033 |Mean   :0.64  |Mean   :0.023 |Mean   :0.24         |\n|   |3rd Qu.:3.0 |3rd Qu.:3.0 |3rd Qu.:3.0 |3rd Qu.:2.0 |3rd Qu.:3   |3rd Qu.:3.0 |3rd Qu.:3.0 |3rd Qu.:3.0   |3rd Qu.:3.0 |3rd Qu.:3.0 |3rd Qu.:3.0 |3rd Qu.:3.0  |3rd Qu.:4.0 |3rd Qu.:3.0   |3rd Qu.:0.000 |3rd Qu.:0.000 |3rd Qu.:0.000 |3rd Qu.:0.000 |3rd Qu.:0.000 |3rd Qu.:0.00 |3rd Qu.:0.00 |3rd Qu.:0.000  |3rd Qu.:0.000 |3rd Qu.:0.000 |3rd Qu.:0.000 |3rd Qu.:0.000 |3rd Qu.:1.00  |3rd Qu.:0.000 |3rd Qu.:0.00         |\n|   |Max.   :4.0 |Max.   :4.0 |Max.   :4.0 |Max.   :4.0 |Max.   :4   |Max.   :4.0 |Max.   :4.0 |Max.   :4.0   |Max.   :4.0 |Max.   :4.0 |Max.   :4.0 |Max.   :4.0  |Max.   :4.0 |Max.   :4.0   |Max.   :1.000 |Max.   :1.000 |Max.   :1.000 |Max.   :1.000 |Max.   :1.000 |Max.   :1.00 |Max.   :1.00 |Max.   :1.000  |Max.   :1.000 |Max.   :1.000 |Max.   :1.000 |Max.   :1.000 |Max.   :1.00  |Max.   :1.000 |Max.   :1.00         |\n|   |NA's   :56  |NA's   :167 |NA's   :150 |NA's   :173 |NA's   :246 |NA's   :103 |NA's   :170 |NA's   :156   |NA's   :90  |NA's   :198 |NA's   :193 |NA's   :105  |NA's   :125 |NA's   :138   |NA            |NA            |NA            |NA            |NA            |NA           |NA           |NA             |NA            |NA            |NA            |NA            |NA            |NA            |NA                   |\n:::\n:::\n\n\nThe original data set had no missing values on any variable. Since there are missing values on the fourteen risk perception variables, we conclude that the conversion is correct. There are no missing values on the experience variables, which is to be expected, as the lack of response to one variable was coded as `0` (\"no\").\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}